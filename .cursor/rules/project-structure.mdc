---
description: Swift Simplify Next.js + Supabase é¡¹ç›®ç»“æ„æŒ‡å—
globs: 
alwaysApply: true
---

# Swift Simplify é¡¹ç›®ç»“æ„æŒ‡å—

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä½¿ç”¨ Next.js 15ã€Better Auth å’Œ Supabase æ„å»ºçš„å…¨æ ˆåº”ç”¨ç¨‹åºå¯åŠ¨æ¨¡æ¿ã€‚

## æ ¸å¿ƒç›®å½•ç»“æ„

```
ğŸ“¦ swift-simplify-starter
â”œâ”€â”€ ğŸ“‚ app/                    # Next.js 15 App Router
â”‚   â”œâ”€â”€ ğŸ“‚ (auth)/            # è®¤è¯é¡µé¢ç»„
â”‚   â”‚   â”œâ”€â”€ login/           # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ register/        # æ³¨å†Œé¡µé¢
â”‚   â”‚   â””â”€â”€ actions.ts       # è®¤è¯ç›¸å…³åŠ¨ä½œ
â”‚   â”œâ”€â”€ ğŸ“‚ (dashboard)/       # ä»ªè¡¨æ¿é¡µé¢ç»„
â”‚   â”‚   â”œâ”€â”€ dashboard/       # ä¸»ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ profile/         # ç”¨æˆ·èµ„æ–™
â”‚   â”‚   â””â”€â”€ layout.tsx       # ä»ªè¡¨æ¿å¸ƒå±€
â”‚   â”œâ”€â”€ ğŸ“‚ api/               # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth/            # Better Auth API ç«¯ç‚¹
â”‚   â”‚   â””â”€â”€ stripe/          # Stripe æ”¯ä»˜ API
â”‚   â”œâ”€â”€ layout.tsx           # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx             # é¦–é¡µ
â”‚   â””â”€â”€ globals.css          # å…¨å±€æ ·å¼
â”œâ”€â”€ ğŸ“‚ components/            # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ ui/               # ShadCN UI åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ layout/           # å¸ƒå±€ç»„ä»¶ï¼ˆHeaderã€Footerç­‰ï¼‰
â”‚   â””â”€â”€ ğŸ“‚ user/             # ç”¨æˆ·ç›¸å…³ç»„ä»¶
â”œâ”€â”€ ğŸ“‚ hooks/                 # è‡ªå®šä¹‰ React Hooks
â”‚   â”œâ”€â”€ use-client-fetch.ts  # æ•°æ®è·å– Hook
â”‚   â”œâ”€â”€ use-client-mutation.ts # æ•°æ®ä¿®æ”¹ Hook
â”‚   â”œâ”€â”€ useStripe.ts         # Stripe é›†æˆ Hook
â”‚   â””â”€â”€ useUserPurchases.ts  # ç”¨æˆ·è´­ä¹°ç®¡ç† Hook
â”œâ”€â”€ ğŸ“‚ lib/                   # å·¥å…·å‡½æ•°å’Œé…ç½®
â”‚   â”œâ”€â”€ auth.ts              # Better Auth æœåŠ¡å™¨é…ç½®
â”‚   â”œâ”€â”€ auth-client.ts       # Better Auth å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth-context.tsx     # è®¤è¯ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ stripe.ts            # Stripe å®¢æˆ·ç«¯é…ç½®
â”‚   â”œâ”€â”€ stripe-server.ts     # Stripe æœåŠ¡å™¨é…ç½®
â”‚   â””â”€â”€ utils.ts             # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“‚ supabase/              # Supabase é…ç½®
â”‚   â”œâ”€â”€ client.ts            # å®¢æˆ·ç«¯å®ä¾‹
â”‚   â”œâ”€â”€ server.ts            # æœåŠ¡å™¨å®ä¾‹
â”‚   â””â”€â”€ migrations/          # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ messages/              # å›½é™…åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ en.json              # è‹±è¯­ç¿»è¯‘
â”‚   â”œâ”€â”€ zh.json              # ä¸­æ–‡ç¿»è¯‘
â”‚   â””â”€â”€ ja.json              # æ—¥è¯­ç¿»è¯‘
â”œâ”€â”€ ğŸ“‚ i18n/                  # å›½é™…åŒ–é…ç½®
â”œâ”€â”€ ğŸ“‚ types/                 # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ ğŸ“‚ config/                # é…ç½®æ–‡ä»¶
â””â”€â”€ ğŸ“‚ docs/                  # é¡¹ç›®æ–‡æ¡£
    â”œâ”€â”€ ğŸ“‚ landing-page/     # ç€é™†é¡µæ–‡æ¡£
    â”œâ”€â”€ ğŸ“‚ design/           # è®¾è®¡ç³»ç»Ÿæ–‡æ¡£
    â””â”€â”€ ğŸ“‚ product/          # äº§å“æ–‡æ¡£
```

## å…³é”®æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 15 with App Router
- **è®¤è¯ç³»ç»Ÿ**: Better Auth (æ›¿ä»£ Supabase Auth)
- **æ•°æ®åº“**: Supabase (ä»…ç”¨äºæ•°æ®å­˜å‚¨)
- **æ”¯ä»˜å¤„ç†**: Stripe
- **çŠ¶æ€ç®¡ç†**: React Query (TanStack Query)
- **UI ç»„ä»¶**: ShadCN/UI + Radix UI
- **æ ·å¼ç³»ç»Ÿ**: Tailwind CSS
- **ç±»å‹ç³»ç»Ÿ**: TypeScript
- **é‚®ä»¶æœåŠ¡**: Resend
- **å›½é™…åŒ–**: Next-Intl

## ç›®å½•ä½¿ç”¨è§„åˆ™

### 1. åº”ç”¨è·¯ç”± (`app/`)
- ä½¿ç”¨ Next.js 15 App Router
- è·¯ç”±ç»„ä½¿ç”¨æ‹¬å· `(group)` å‘½å
- æ¯ä¸ªé¡µé¢åŒ…å« `page.tsx`
- å¸ƒå±€æ–‡ä»¶å‘½åä¸º `layout.tsx`
- API è·¯ç”±æ”¾åœ¨ `api/` ç›®å½•ä¸‹

### 2. ç»„ä»¶ç»„ç»‡ (`components/`)
- `ui/`: ShadCN UI åŸºç¡€ç»„ä»¶
- `layout/`: é¡µé¢å¸ƒå±€ç›¸å…³ç»„ä»¶
- `user/`: ç”¨æˆ·åŠŸèƒ½ç›¸å…³ç»„ä»¶
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- æ¯ä¸ªå¤æ‚ç»„ä»¶æœ‰ç‹¬ç«‹ç›®å½•

### 3. Hooks (`hooks/`)
- è‡ªå®šä¹‰ Hooks ä½¿ç”¨ `use` å‰ç¼€
- æ•°æ®ç›¸å…³æ“ä½œä½¿ç”¨ React Query
- æ¯ä¸ª Hook æœ‰æ˜ç¡®çš„èŒè´£

### 4. åº“æ–‡ä»¶ (`lib/`)
- ç¬¬ä¸‰æ–¹æœåŠ¡é…ç½®
- å·¥å…·å‡½æ•°
- ä¸Šä¸‹æ–‡æä¾›è€…
- ç±»å‹å®‰å…¨çš„å®¢æˆ·ç«¯å®ä¾‹

### 5. æ•°æ®åº“ (`supabase/`)
- åªç”¨äºæ•°æ®å­˜å‚¨ï¼Œä¸ç”¨äºè®¤è¯
- å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å®ä¾‹åˆ†ç¦»
- è¿ç§»æ–‡ä»¶æŒ‰æ—¶é—´æˆ³å‘½å

## å‘½åçº¦å®š

### æ–‡ä»¶å‘½å
- React ç»„ä»¶: `PascalCase.tsx`
- å·¥å…·å‡½æ•°: `camelCase.ts`
- é…ç½®æ–‡ä»¶: `kebab-case.ts`
- é¡µé¢æ–‡ä»¶: `page.tsx`
- å¸ƒå±€æ–‡ä»¶: `layout.tsx`

### ç›®å½•å‘½å
- ä½¿ç”¨ `kebab-case`
- è·¯ç”±ç»„ä½¿ç”¨æ‹¬å· `(group-name)`
- æè¿°æ€§å’ŒåŠŸèƒ½æ€§å‘½å

## å¯¼å…¥è·¯å¾„çº¦å®š

ä½¿ç”¨ç»å¯¹è·¯å¾„å’Œåˆ«åï¼š

```typescript
// ç»„ä»¶å¯¼å…¥
import { Button } from '@/components/ui/button'
import { Header } from '@/components/layout/Header'

// Hook å¯¼å…¥
import { useAuth } from '@/lib/auth-context'
import { useClientFetch } from '@/hooks/use-client-fetch'

// å·¥å…·å‡½æ•°å¯¼å…¥
import { cn } from '@/lib/utils'

// ç±»å‹å¯¼å…¥
import type { User } from '@/types'
```

## æœ€ä½³å®è·µ

1. **å…³æ³¨ç‚¹åˆ†ç¦»**: æ¯ä¸ªç›®å½•å’Œæ–‡ä»¶æœ‰æ˜ç¡®çš„èŒè´£
2. **ä»£ç å¤ç”¨**: å…±äº«ç»„ä»¶å’Œ Hooks æ”¾åœ¨é€‚å½“ä½ç½®
3. **ç±»å‹å®‰å…¨**: æ‰€æœ‰ç»„ä»¶å’Œå‡½æ•°éƒ½æœ‰ç±»å‹å®šä¹‰
4. **æ€§èƒ½ä¼˜åŒ–**: åˆç†ä½¿ç”¨ React Query ç¼“å­˜
5. **å›½é™…åŒ–æ”¯æŒ**: æ‰€æœ‰æ–‡æœ¬éƒ½é€šè¿‡ i18n ç³»ç»Ÿå¤„ç†

## æ–°åŠŸèƒ½å¼€å‘æµç¨‹

1. **é¡µé¢å¼€å‘**: åœ¨ `app/` ä¸‹åˆ›å»ºæ–°è·¯ç”±
2. **ç»„ä»¶å¼€å‘**: åœ¨ `components/` ä¸‹åˆ›å»ºå¯å¤ç”¨ç»„ä»¶
3. **æ•°æ®æ“ä½œ**: ä½¿ç”¨ `hooks/` ä¸­çš„æ•°æ® Hooks
4. **API å¼€å‘**: åœ¨ `app/api/` ä¸‹åˆ›å»º API è·¯ç”±
5. **ç±»å‹å®šä¹‰**: åœ¨ `types/` ä¸‹å®šä¹‰ç›¸å…³ç±»å‹
